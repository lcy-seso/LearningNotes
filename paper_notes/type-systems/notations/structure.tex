\usepackage {amsmath, amsfonts, stmaryrd, amssymb} % Math packages
\usepackage {cite}
\usepackage[rgb, dvipsnames] {xcolor}

\usepackage{bussproofs}
\usepackage{formal-grammar}
\usepackage{dirtytalk}
\usepackage{blindtext}
\usepackage{epigraph} 

\usepackage{parcolumns}
\usepackage{lipsum}

\usepackage{tcolorbox}
\tcbuselibrary{listings,breakable}
\tcbset{listing engine=listings,colframe=black,colback=white,size=small}

\definecolor{blue1}{RGB}{24,116,205}
\definecolor{aliceblue}{RGB}{240,248,255}
\definecolor{maroon}{RGB}{176,48,96}
\definecolor {dkgreen}{RGB}{0,139,139}
\definecolor{byzantium}{rgb}{0.44,0.16,0.39}
\definecolor{grey}{RGB}{128,128,128}
\definecolor{tomato}{RGB}{139,26,26}
\definecolor{commentsColor}{rgb}{0,128,128}
\definecolor{keywordsColor}{rgb}{0.0,0.0,0.64}
\definecolor{stringColor}{rgb}{0.558215,0.0,0.135316}
\definecolor{brown}{RGB}{166,42,42}
\definecolor{orchid}{RGB}{153,50,205}
\definecolor{thistle}{RGB}{216,191,216}

\usepackage{graphicx}
\usepackage{tabularx}
\usepackage{tabulary,booktabs}
\usepackage{longtable}

% \usepackage[nounderscore]{syntax}
% % \shortverb{\|}
% \setlength{\grammarindent}{2cm}
% \newcommand{\indalt}[1][2]{\\\hspace*{#1em}\textbar\quad}

% \usepackage{fontspec}
% \setmonofont{Consolas}

\usepackage {enumerate} % Custom item numbers for enumerations

\usepackage[ruled] {algorithm2e} % Algorithms

\usepackage[framemethod = tikz] {mdframed} % Allows defining custom boxed/framed environments

\usepackage{soul}
\usepackage[colorlinks=true,
            linkcolor=dkgreen,
            citecolor=blue,
            anchorcolor=bule,
            urlcolor=maroon]{hyperref}
\usepackage[doipre={doi:~}]{uri}

\usepackage{caption}
\captionsetup{font={small}}

\usepackage{pifont}
\newcommand{\cmark}{\ding{51}}
\newcommand{\xmark}{\ding{55}}
\newcommand{\tabincell}[2]{\begin{tabular}{@{}#1@{}}#2\end{tabular}}

%\usepackage{multirow, booktabs}
%-------------------------------------------------------------------------------
%  Code snippets.
%-------------------------------------------------------------------------------

\usepackage{listings} % File listings, with syntax highlighting


\lstdefinelanguage{Python}{
  keywords={def, if, elif, else,return, class, float, lambda, for, range, in, list},
  otherkeywords={},
  keywordstyle=\color{blue1}\bfseries,
  keywords=[2]{float32, kaleido, @kaleido, function, params, map, scan, reduce, fold},
  keywordstyle=[2]\color{maroon}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{\#},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{byzantium}\ttfamily,
  stringstyle=\color{dkgreen},
  morestring=[b]',
  morestring=[b]"
}


\lstset{ %
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
  basicstyle=\scriptsize,
  %\footnotesize,tiny,scriptsize,footnotesize,small,normalsize,large
  % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{commentsColor}\textit,    % comment style
  deletekeywords={@},            % if you want to delete keywords from the given language
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  frame=tb,                        % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{keywordsColor}\bfseries,       % keyword style
  language=Python,                 % the language of the code (can be overrided per snippet)
  otherkeywords={},           % if you want to add more keywords to the set
  % numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
  % numbersep=5pt,                   % how far the line-numbers are from the code
  % numberstyle=\tiny\color{commentsColor}, % the style that is used for the line-numbers
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=1,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{bluebell}, % string literal style
  tabsize=2,	                   % sets default tabsize to 2 spaces
  title=\lstname,                  % show the filename of files included with \lstinputlisting; also try caption instead of title
  columns=fixed                    % Using fixed column width (for e.g. nice alignment)
}

%-------------------------------------------------------------------------------
%  DOCUMENT MARGINS
%-------------------------------------------------------------------------------
\usepackage{geometry} % Required for adjusting page dimensions and margins

\geometry{
  paper=a4paper, % Paper size, change to letterpaper for US letter size
  top=2.5cm, % Top margin
  bottom=3cm, % Bottom margin
  left=2.5cm, % Left margin
  right=2.5cm, % Right margin
  headheight=14pt, % Header height
  footskip=1.5cm, % Space from the bottom margin to the baseline of the footer
  headsep=1.2cm, % Space from the top margin to the baseline of the header
  %showframe, % Uncomment to show how the type block is set on the page
}

%-------------------------------------------------------------------------------
%  FONTS
%------------------------------------------------------------------------------
\usepackage[utf8]{inputenc} % Required for inputting international characters
\usepackage[T1]{fontenc} % Output font encoding for international characters

\usepackage{XCharter} % Use the XCharter fonts

%-------------------------------------------------------------------------------
%  NUMBERED QUESTIONS ENVIRONMENT
%-------------------------------------------------------------------------------

% Usage:
% \begin{question}[optional title]
%  Question contents
% \end{question}

\mdfdefinestyle{question}{
  innertopmargin=1.2\baselineskip,
  innerbottommargin=0.8\baselineskip,
  roundcorner=5pt,
  nobreak,
  % singleextra={%
  %  \draw(P-|O)node[xshift=1em,anchor=west,fill=white,draw,rounded corners=5pt]{%
  %  Question \theQuestion\questionTitle};
  %},
}

\newcounter{Question} % Stores the current question number that gets iterated
                      % with each new question

% Define a custom environment for numbered questions
\newenvironment{question}[1][\unskip]{
  \bigskip
  \stepcounter{Question}
  \newcommand{\questionTitle}{~#1}
  \begin{mdframed}[style=question]
}{
  \end{mdframed}
  \medskip
}

%-------------------------------------------------------------------------------
%  INFORMATION ENVIRONMENT
%-------------------------------------------------------------------------------

% Usage:
% \begin{info}[optional title, defaults to "Info:"]
%   contents
% \end{info}

\mdfdefinestyle{info}{%
  topline=false, bottomline=false,
  leftline=false, rightline=false,
  nobreak,
  singleextra={%
    \fill[black](P-|O)circle[radius=0.4em];
    \node at(P-|O){\color{white}\scriptsize\bf i};
    \draw[very thick](P-|O)++(0,-0.8em)--(O);%--(O-|P);
  }
}

% Define a custom environment for information
\newenvironment{info}[1][Info:]{ % Set the default title to "Info:"
  \medskip
  \begin{mdframed}[style=info]
    \noindent{\textbf{#1}}
}{
  \end{mdframed}
}
